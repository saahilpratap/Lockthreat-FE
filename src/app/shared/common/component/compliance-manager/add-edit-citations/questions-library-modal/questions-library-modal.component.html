<div class="kt-section kt-section--first">
  <div class="kt-section__body">
    <div class="row">
      <div class="col-lg-6 col-md-6 col-sm-6">
        <h5 class="kt-section__title kt-section__title-sm">
          {{"Questions Library" | localize}}
        </h5>
      </div>
      <div class="col-lg-6 col-md-6 col-sm-6">
        <span class="pull-right" (click)="show()"
          ><button type="submit" class="btn btn-sm btn-submit">
            <span><i class="fa fa-plus"></i> {{"Add New" | localize}}</span>
          </button></span
        >
      </div>
    </div>
    <hr />
    <div class="row">
      <div class="col-lg-12 col-md-12 col-sm-12">
        <div class="primeng-datatable-container">
          <p-table
            [value]="questionLibraryList"
            #dataTable
            [lazy]="true"
            [scrollable]="true"
            ScrollWidth="100%"
          >
            <ng-template pTemplate="header">
              <tr>
                <th style="width: 150px;">QID</th>
                <th style="width: 200px;">Questionnaire Title</th>
                <th style="width: 200px;">Source Question</th>
                <th style="width: 200px;">Display Question</th>
                <th style="width: 200px;">Question</th>
                <th style="width: 200px;">Section</th>
                <th style="width: 200px;">Question Area</th>
                <th style="width: 200px;">Category</th>
                <th style="width: 200px;">Question Target</th>
                <th style="width: 200px;">Question Status</th>
                <th style="width: 200px;">Authoratative Document(s)</th>
                <th style="width: 200px;">Control Standards</th>
                <th style="width: 200px;">Answer Type</th>
                <th style="width: 200px;">Answer Text</th>
                <th style="width: 200px;">Answer Type</th>
                <th style="width: 200px;">Answer Values</th>
                <th style="width: 200px;">Answer Points</th>
                <th style="width: 200px;">Total Points</th>
                <th style="width: 100px;">Actions</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-questionLibrary let-ri="rowIndex">
              <tr>
                <td style="width: 150px;">{{questionLibrary.QID}}</td>
                <td style="width: 200px;">
                  <div
                    class="table-text-wrap"
                    [pTooltip]="questionLibrary.QuestionnaireTitle"
                    tooltipPosition="bottom"
                    [innerHTML]="questionLibrary.QuestionnaireTitle !== null ? questionLibrary.QuestionnaireTitle : '--'"
                  ></div>
                </td>
                <td style="width: 200px;">
                  <div
                    class="table-text-wrap"
                    [pTooltip]="stripHtml(questionLibrary.SourceQuestion)"
                    tooltipPosition="bottom"
                    [innerHTML]="questionLibrary.SourceQuestion !== null ? questionLibrary.SourceQuestion : '--'"
                  ></div>
                </td>
                <td style="width: 200px;">
                  <div
                    class="table-text-wrap"
                    [pTooltip]="questionLibrary.DisplayQuestion"
                    tooltipPosition="bottom"
                    [innerHTML]="questionLibrary.DisplayQuestion !== null ? questionLibrary.DisplayQuestion : '--'"
                  ></div>
                </td>
                <td style="width: 200px;">
                  <div
                    class="table-text-wrap"
                    [pTooltip]="stripHtml(questionLibrary.Question)"
                    tooltipPosition="bottom"
                    [innerHTML]="questionLibrary.Question !== null ? questionLibrary.Question : '--'"
                  ></div>
                </td>
                <td style="width: 200px;">
                  <div
                    class="table-text-wrap"
                    [pTooltip]="questionLibrary.Section"
                    tooltipPosition="bottom"
                    [innerHTML]="questionLibrary.Section !== null ? questionLibrary.Section : '--'"
                  ></div>
                </td>
                <td style="width: 200px;">
                  <div
                    class="table-text-wrap"
                    [pTooltip]="questionLibrary.QuestionArea"
                    tooltipPosition="bottom"
                    [innerHTML]="questionLibrary.QuestionArea !== null ? questionLibrary.QuestionArea : '--'"
                  ></div>
                </td>
                <td style="width: 200px;">
                  <div
                    class="table-text-wrap"
                    [pTooltip]="questionLibrary.Category"
                    tooltipPosition="bottom"
                    [innerHTML]="questionLibrary.Category !== null ? questionLibrary.Category : '--'"
                  ></div>
                </td>
                <td style="width: 200px;">
                  <div
                    class="table-text-wrap"
                    [pTooltip]="questionLibrary.QuestionTarget"
                    tooltipPosition="bottom"
                    [innerHTML]="questionLibrary.QuestionTarget !== null ? questionLibrary.QuestionTarget : '--'"
                  ></div>
                </td>
                <td style="width: 200px;">
                  <div
                    class="table-text-wrap"
                    [pTooltip]="questionLibrary.QuestionStatus"
                    tooltipPosition="bottom"
                    [innerHTML]="questionLibrary.QuestionStatus !== null ? questionLibrary.QuestionStatus: '--'"
                  ></div>
                </td>
                <td style="width: 200px;">
                  <div
                    class="table-text-wrap"
                    [pTooltip]="questionLibrary.AuthoratativeDocuments"
                    tooltipPosition="bottom"
                    [innerHTML]="questionLibrary.AuthoratativeDocuments !== null ? questionLibrary.AuthoratativeDocuments: '--'"
                  ></div>
                </td>
                <td style="width: 200px;">
                  <div
                    class="table-text-wrap"
                    [pTooltip]="stripHtml(questionLibrary.ControlStandards)"
                    tooltipPosition="bottom"
                    [innerHTML]="questionLibrary.ControlStandards !== null ? questionLibrary.ControlStandards: '--'"
                  ></div>
                </td>
                <td style="width: 200px;">
                  <div
                    class="table-text-wrap"
                    [pTooltip]="questionLibrary.AnswerType"
                    tooltipPosition="bottom"
                    [innerHTML]="questionLibrary.AnswerType !== null ? questionLibrary.AnswerType: '--'"
                  ></div>
                </td>
                <td style="width: 200px;">
                  <div
                    class="table-text-wrap"
                    [pTooltip]="stripHtml(questionLibrary.AnswerText)"
                    tooltipPosition="bottom"
                    [innerHTML]="questionLibrary.AnswerText !== null ? questionLibrary.AnswerText: '--'"
                  ></div>
                </td>
                <td style="width: 200px;">
                  <div
                    class="table-text-wrap"
                    [pTooltip]="questionLibrary.AnswerType1"
                    tooltipPosition="bottom"
                    [innerHTML]="questionLibrary.AnswerType1 !== null ? questionLibrary.AnswerType1: '--'"
                  ></div>
                </td>
                <td style="width: 200px;">
                  <div
                    class="table-text-wrap"
                    [pTooltip]="stripHtml(questionLibrary.AnswerValues)"
                    tooltipPosition="bottom"
                    [innerHTML]="questionLibrary.AnswerValues !== null ? questionLibrary.AnswerValues: '--'"
                  ></div>
                </td>
                <td style="width: 200px;">
                  <div
                    class="table-text-wrap"
                    [pTooltip]="questionLibrary.AnswerPoints"
                    tooltipPosition="bottom"
                    [innerHTML]="questionLibrary.AnswerPoints !== null ? questionLibrary.AnswerPoints: '--'"
                  ></div>
                </td>
                <td style="width: 200px;">
                  <div
                    class="table-text-wrap"
                    [pTooltip]="questionLibrary.TotalPoints"
                    tooltipPosition="bottom"
                    [innerHTML]="questionLibrary.TotalPoints !== null ? questionLibrary.TotalPoints: '--'"
                  ></div>
                </td>
                <td style="width: 100px;">
                  <i
                    class="fas fa-pencil-alt kt-padding-5 mouse-hover kt-font-info"
                    (click)="editQuestionLibrary(questionLibrary)"
                    title="Edit"
                  ></i>
                  <i
                    class="far fa-trash-alt kt-padding-5 mouse-hover kt-font-google"
                    title="Delete"
                    (click)="deleteQuestionLibrary(ri)"
                  ></i>
                </td>
              </tr>
            </ng-template>
          </p-table>
          <div class="primeng-no-data" *ngIf="questionLibraryList.length == 0">
            No question library data added
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div
  appBsModal
  #AddQuestionLibraryModal="bs-modal"
  class="modal fade"
  tabindex="-1"
  role="dialog"
  aria-labelledby="AddQuestionLibraryModal"
  aria-hidden="true"
  [config]="{backdrop: 'static'}"
>
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <form
        name="QuestionLibraryForm"
        #QuestionLibraryForm="ngForm"
        (ngSubmit)="saveQuestionLibrary(QuestionLibraryForm)"
      >
        <div class="modal-header">
          <h4 class="modal-title">
            {{'Question Library' | localize}}
          </h4>
        </div>
        <div class="modal-body" style="min-height: 350px;">
          <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-12">
              <div class="form-group">
                <label>{{"QID" | localize}}</label>
                <input
                  type="text"
                  class="form-control"
                  [(ngModel)]="questionLibrary.QID"
                  name="QIDField"
                  #QIDField="ngModel"
                  placeholder="QID"
                />
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12">
              <div class="form-group">
                <label class="required"
                  >{{"Questionnaire Title" | localize}}</label
                >
                <input
                  type="text"
                  class="form-control"
                  [(ngModel)]="questionLibrary.QuestionnaireTitle"
                  name="QuestionnaireTitleField"
                  #QuestionnaireTitleField="ngModel"
                  placeholder="Questionnaire Title"
                  required
                />
                <div></div>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12">
              <div class="form-group">
                <label>{{"Source Question" | localize}}</label>
                <textarea
                  type="text"
                  class="form-control"
                  [(ngModel)]="questionLibrary.SourceQuestion"
                  placeholder="Source Question"
                  name="SourceQuestionField"
                  #SourceQuestionField="ngModel"
                  rows="3"
                ></textarea>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12">
              <div class="form-group">
                <label>{{"Display Question" | localize}}</label>
                <input
                  type="text"
                  class="form-control"
                  [(ngModel)]="questionLibrary.DisplayQuestion"
                  name="DisplayQuestionField"
                  #DisplayQuestionField="ngModel"
                  placeholder="Display Question"
                />
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12">
              <div class="form-group">
                <label>{{"Question" | localize}}</label>
                <textarea
                  type="text"
                  class="form-control"
                  [(ngModel)]="questionLibrary.Question"
                  placeholder="Question"
                  name="QuestionField"
                  #QuestionField="ngModel"
                  rows="3"
                ></textarea>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12">
              <div class="form-group">
                <label>{{"Section" | localize}}</label>
                <p-dropdown
                  [style]="{'width': '100%'}"
                  [options]="null"
                  [filter]="true"
                  placeholder="Select Type"
                  optionLabel="value"
                  [(ngModel)]="questionLibrary.Section"
                  name="SectionField"
                  #SectionField="ngModel"
                ></p-dropdown>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12">
              <div class="form-group">
                <label>{{"Question Area" | localize}}</label>
                <p-dropdown
                  [style]="{'width': '100%'}"
                  [options]="null"
                  [filter]="true"
                  placeholder="Select"
                  optionLabel="value"
                  [(ngModel)]="questionLibrary.QuestionArea"
                  name="QuestionAreaField"
                  #QuestionAreaField="ngModel"
                ></p-dropdown>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12">
              <div class="form-group">
                <label>{{"Category" | localize}}</label>
                <p-dropdown
                  [style]="{'width': '100%'}"
                  [options]="null"
                  [filter]="true"
                  placeholder="Select "
                  optionLabel="value"
                  [(ngModel)]="questionLibrary.Category"
                  name="CategoryField"
                  #CategoryField="ngModel"
                ></p-dropdown>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12">
              <div class="form-group">
                <label>{{"Question Target" | localize}}</label>
                <p-multiSelect
                  [style]="{'width': '100%'}"
                  [options]="null"
                  [maxSelectedLabels]="1"
                  [filter]="true"
                  placeholder="Select"
                  optionLabel="QuestionTarget"
                  [(ngModel)]="questionLibrary.QuestionTarget"
                  name="QuestionTargetField"
                  #QuestionTargetField="ngModel"
                ></p-multiSelect>
              </div>
            </div>

            <div class="col-lg-4 col-md-4 col-sm-12">
              <div class="form-group">
                <label>{{"Question Status" | localize}}</label>
                <p-dropdown
                  [style]="{'width': '100%'}"
                  [options]="null"
                  [filter]="true"
                  placeholder="Select "
                  optionLabel="value"
                  [(ngModel)]="questionLibrary.QuestionStatus"
                  name="QuestionStatusField"
                  #QuestionStatusField="ngModel"
                ></p-dropdown>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12">
              <div class="form-group">
                <label>{{"Authoratative Document(s)" | localize}}</label>
                <p-multiSelect
                  [style]="{'width': '100%'}"
                  [options]="null"
                  [maxSelectedLabels]="1"
                  [filter]="true"
                  placeholder="Select"
                  optionLabel="AuthoratativeDocuments"
                  [(ngModel)]="questionLibrary.AuthoratativeDocuments"
                  name="AuthoratativeDocumentsField"
                  #AuthoratativeDocumentsField="ngModel"
                ></p-multiSelect>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12">
              <div class="form-group">
                <label>{{"Control Standards" | localize}}</label>
                <p-multiSelect
                  [style]="{'width': '100%'}"
                  [options]="null"
                  [maxSelectedLabels]="1"
                  [filter]="true"
                  placeholder="Select"
                  optionLabel="ControlStandards"
                  [(ngModel)]="questionLibrary.ControlStandards"
                  name="ControlStandardsField"
                  #ControlStandardsField="ngModel"
                ></p-multiSelect>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12">
              <div class="form-group">
                <label>{{"Answer Type" | localize}}</label>
                <p-dropdown
                  [style]="{'width': '100%'}"
                  [options]="null"
                  [filter]="true"
                  placeholder="Select "
                  optionLabel="value"
                  [(ngModel)]="questionLibrary.AnswerType"
                  name="AnswerTypeField"
                  #AnswerTypeField="ngModel"
                ></p-dropdown>
              </div>
            </div>

            <div class="col-lg-4 col-md-4 col-sm-12">
              <div class="form-group">
                <label>{{"Answer Text" | localize}}</label>
                <textarea
                  type="text"
                  class="form-control"
                  [(ngModel)]="questionLibrary.AnswerText"
                  placeholder="Answer Text"
                  name="AnswerTextField"
                  #AnswerTextField="ngModel"
                  rows="3"
                ></textarea>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12">
              <div class="form-group">
                <label>{{"Answer Type" | localize}}</label>
                <p-dropdown
                  [style]="{'width': '100%'}"
                  [options]="null"
                  [filter]="true"
                  placeholder="Select "
                  optionLabel="value"
                  [(ngModel)]="questionLibrary.AnswerType1"
                  name="AnswerType1Field"
                  #AnswerType1Field="ngModel"
                ></p-dropdown>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12">
              <div class="form-group">
                <label>{{"Answer Values" | localize}}</label>
                <textarea
                  type="text"
                  class="form-control"
                  [(ngModel)]="questionLibrary.AnswerValues"
                  placeholder="Answer Values"
                  name="AnswerValuesField"
                  #AnswerValuesField="ngModel"
                  rows="3"
                ></textarea>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12">
              <div class="form-group">
                <label>{{"Answer Points" | localize}}</label>
                <input
                  type="text"
                  class="form-control"
                  [(ngModel)]="questionLibrary.AnswerPoints"
                  name="AnswerPointsField"
                  #AnswerPointsField="ngModel"
                  placeholder="Answer Points"
                />
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12">
              <div class="form-group">
                <label>{{"Tota lPoints" | localize}}</label>
                <input
                  type="text"
                  class="form-control"
                  [(ngModel)]="questionLibrary.TotalPoints"
                  name="TotalPointsField"
                  #TotalPointsField="ngModel"
                  placeholder="Total Points"
                />
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-sm btn-outline-cancel"
            (click)="close(QuestionLibraryForm)"
          >
            {{"Cancel" | localize}}
          </button>
          <button type="submit" class="btn btn-sm btn-submit">
            <span>{{"Save" | localize}}</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
